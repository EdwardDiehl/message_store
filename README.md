# MessageStore
### Library that stores text data into different key-value storage backends. It can store data into several storage backends at once.

------

# Getting started

## Installation
Clone repository

~~~
$ git clone git@github.com:edwarddiehl/message_store.git
~~~

And add directory with code to your Gemfile
~~~
gem 'message_store', path: '/path/to/message_store'
~~~

Or build gem with next command
~~~
$ gem build message_store.gemspec
~~~

And install it
~~~
$ gem install message_store*.gem
~~~
## Usage

Build and install gem, run irb
~~~
$ irb
~~~

~~~ ruby
require 'message_store'

# Create a message store specifying one or more backend storages.
# This will create message_store for writing messages to given backends storages.
message_store = MessageStore.new({Rest: {url: 'http://simple-rest-store.herokuapp.com/'}, File: {path: '/tmp/store.yml'}})

# Send message to store(s)
# There are two different methods for sending messages to storages with a little different behaviour.
# It will return stored value - 'value'
message_store['id'] = 'value'

# It will return id of stored value - 'id'
message_store.post('id' => 'value')

# Let it generate message id automatically specifying nil as message id
# It will store message with autogenerated id like 'cb1e2a5cd5abd7ab529dee6ecfd24cb4'
message_store[nil] = 'value'
message_store.post(nil => 'value')
~~~

------

# Links
* Source: <http://github.com/edwarddiehl/message_store>

------

# Supported backends

It's easy to add new backends, for now it supports two following backends:

* File
* Rest

------

# TODO
* add tests
